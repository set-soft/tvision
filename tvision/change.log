$Log$.
Revision 2.195  2002/07/01 15:33:40  set
* Added: A new example that shows how to use help context values and the
status line. Ported by Mike.

Revision 2.194  2002/07/01 14:26:11  set
* Fixed: [X11] cursor artifacts intoduced in last patches.

Revision 2.193  2002/07/01 13:02:47  set
* Added: Font set/restore mechanism to TScreen.
* Added: [X11] Full fonts support.
* Added: [Linux] Partial fonts support, more things needs to be solved.
* Added: A fonts test/demo example.
* Added: GetCodePages call to memorize the current code pages in use.
* Fixed: [X11] Initialization to allocate classHint, no fixed size, and to
do it before indicating success.

Revision 2.192  2002/07/01 12:57:39  set
* Fixed: [X11] clipboard code.

Revision 2.191  2002/07/01 12:53:39  set
* Fixed: More error reporting details in all clipboard implementations.
* Updated: [DJGPP+Win32] Project and makefiles.

Revision 2.190  2002/07/01 12:49:03  set
Revision 2.189  2002/06/29 20:11:05  set
* Added: [Win32] Clipboard class.
* Updated: [BC++] Makefile to include all the drivers.
* Fixed: [DOS] Clipboard error reporting.

Revision 2.189  2002/07/01 12:38:11  set
* Added: [DOS] Windows clipboard routines.
* Modified: The TVOSClipboard class to report the name of the error in case
of fails and the size of the paste buffer.
* Modified: All the drivers to generate dependencies when compiled for
another platforms and protected the headers against use in other platforms.
* Modified: [DJGPP] The project to also include UNIX drivers. That's an
important step towards a project unification.

Revision 2.188  2002/06/28 20:21:46  set
* Fixed: [MSVC] More details, only 2 or 3 files needs adjustments to get
the code compiled. Errors from WintiX.

Revision 2.187  2002/06/28 20:06:30  set
* Added: A new class called TVOSClipboard it gives access to the OS
clipboard/s in a neutral way.
* Added: [X11] code to use the XA_CLIPBOARD and XA_PRIMARY copy/paste
mechanism through the new class. The first is clipboard 0 (recommended) and
the second is the auxiliar mechanism that users should use with the middle
mouse button.
* Added: An example application that shows how to use the new class.

Revision 2.186  2002/06/28 12:38:31  set
* Added: A new capability flag to the drivers. It informs if a screen saver
have any sense for this driver. Ivan remmembered it, a screen saver doesn't
have any sense when we are working inside a window ;-)

Revision 2.185  2002/06/27 20:52:22  set
* Added: [X11] Explanation about WM/Desktop key conflicts to the mini doc.

Revision 2.184  2002/06/27 20:36:58  set
* Added: A doc directory and a file explaining implementation details of
the X11 driver.

Revision 2.183  2002/06/27 20:09:50  set
* Modified: [X11] At least in my XFree86 (Debian GNU/Linux Potato) the Ctrl
+Space combination maps to a keycode 0x20 but none translated symbol. As a
workaround I added a test for this. I also found that shift tab was mapped
to something called ISO_left_tab but nothing was reported to the
application. For this I modified X11 configuration files.
* Removed gkey.gpr, it no longer works.

Revision 2.182  2002/06/27 18:41:45  set
* Fixed: [MSVC] ssize_t isn't defined by standard headers. I also unified
the mechanism to request it because BC++ and MinGW doesn't define it as
MSVC and each one used a different mechanism.
* Fixed: [MSVC] The C flags to include the -I../include. Both fixes from
the output of MSVC sent by WintiX.

Revision 2.181  2002/06/27 18:24:26  set
* Fixed: [MSVC] C code compile rule, patch from WintiX.

Revision 2.180  2002/06/26 16:55:17  set
* Updated: The Win32 headers, some how S.F. CVS got unsynchronized.
* Fixed: getopt and getline to compile with MSVC from output errors
provided by WintiX.
* Updated: Makefiles. CVS users will need to reconfigure.

Revision 2.179  2002/06/26 16:52:15  set
* Fixed: [MSVC] which header is needed for access function.
* Fixed: [MSVC] rules to compile .c files and use of rm. Reported by WintiX

Revision 2.178  2002/06/26 15:17:11  set
* Fixed: [Linux] When the VCS access wasn't available the routine that
restores the screen content put 0x0 attributes in spaces after the text.
They become invisible and what's worst the cursor is also invisible when
positioned over such a character. Now the buffer is properly filled with
the default color (7).

Revision 2.177  2002/06/25 12:17:16  set
* Fixed: The Help Compiler to compile with gcc 3.x, also fixed some bugs.

Revision 2.176  2002/06/25 12:15:01  set
* Added: [Linux] driver options to disable: keyboard patching (PatchKeys),
VCS use (UseVCS) and MDA use (UseMDA).

Revision 2.175  2002/06/24 19:39:04  set
* Modified: [QNX] When linking the dynamic library -lncursesS should be
used, explained by Mike.

Revision 2.174  2002/06/24 19:31:00  set
* Added: [QNX] Package description contributed by Mike.

Revision 2.173  2002/06/24 15:17:42  set
* Fixed: A typedef struct v.s. struct issue reported by gcc 3.1. Reported
by Ortwin.Gasper@t-online.de.

Revision 2.172  2002/06/24 15:10:44  set
* Fixed: dlgdsn example to compile with gcc 3.1. Patch from Andris.

Revision 2.171  2002/06/24 15:04:07  set
* Modified: Removed linuxso/Makefile and linuxso/compat.mak, they are
created by Perl scripts and UNIX targets should have Perl anyways.

Revision 2.170  2002/06/24 15:02:54  set
* Fixed: [BC++] details to cleanly compile with BC++ 5.5.

Revision 2.169  2002/06/24 15:01:35  set
* Modified: [DJGPP] to use /dev/env/DJDIR/etc as directory for
configuration.

Revision 2.168  2002/06/24 15:00:29  set
* Fixed: A couple of errors in new classes exposed when compiling for
djgpp.

Revision 2.167  2002/06/24 14:59:25  set
* Added: "Priority" variable to the configuration section of each driver.
So now you can change the importance of each driver. The section names of
the drivers are DOS, Linux, QNX, UNIX, Win32, WinNT, X11 and XTerm.

Revision 2.166  2002/06/24 14:56:18  set
* Added: A new class to manage a configuration file. Right now only one
setting is accepted in this file: ShowCursorEver. See TVConfigFile in
configfile.cc and TProgInit::config.

Revision 2.165  2002/06/20 20:13:59  set
* Fixed: CLY_GetDefaultFileAttr(CLY_mode_t *mode) for UNIX, it didn't set
writemask making new files to look like R.O.

Revision 2.164  2002/06/20 20:12:38  set
* Added: A new flag to TScreen to indicate is the driver really supports
setCursorShape or just can hide/show the cursor.

Revision 2.163  2002/06/19 19:51:00  set
* Fixed: [X11] The "show cursor ever" flag didn't work OK.

Revision 2.162  2002/06/19 19:30:38  set
* Fixed: Small issue about cursor positioning in TDesktop. Now is cleaner.

Revision 2.161  2002/06/19 18:43:35  set
* Modified: [WWW] The QNX port is now finished, added as available target.

Revision 2.160  2002/06/19 17:10:12  set
* Added: [Linux] support for russian keyboards when the encoding is KOI8.
Alexey Godin gave me the information about the layout. I tested it using
the koi8-r fonts and ru1 keyboard map in my system + a translation of the
"File" menu and worked.

Revision 2.159  2002/06/18 20:50:37  set
* Added: TScroller and TScrollBar now cooperates with Braille Terminals.
From suggestions by Tapio.

Revision 2.158  2002/06/18 20:28:23  set
* Added: [Linux] A comment about LANG variable. Sent by Alexey Godin.

Revision 2.157  2002/06/18 16:41:24  set
* Modified: [QNX] New batch of patches for the QNX console from Mike. This
driver is now finished according to Mike.

Revision 2.156  2002/06/18 14:51:16  set
* Added: Code to remap characters on the fly. I rewrote the code in TView
that sends the data to screen so it can remap characters before doing it.
* Modified: As I was rewrinting the code in TView I changed it to avoid
calling setCharacter which is much less efficient than setCharacters. Now
I copy the text to a buffer and then I change the shadow attribute there.
* Added: Euro sign support.
* Added: Four latin 2 variants used in Linux.
* Added: Now when you set the code page you can specify two code pages. One
maps the font and the other the text handled by the user. This seems to be
stupid but is needed to support Linux mechanism which works this way. If
these code pages are different the code uses the on the fly remap.
* Added: TVCodePage members to create a code page from an unicode array and
to add it to the list of supported code pages.
* Added: [Linux] Detection of the ACM. The user *must* use the correct ACM
unless ISO 8859-1 is used or the ACM is trivial.

Revision 2.155  2002/06/12 20:51:18  set
* Added: Functions to map unicode into the internal code and more
functionality to the code page debug stuff. With this I discovered that
Potato not only have iso-latin1 damaged fonts but also latin2 damaged.

Revision 2.154  2002/06/12 18:28:12  set
* Modified: [Linux] GetCursorPos so if it gets a wrong escape sequence
doesn't crash. From a report by Tapio.

Revision 2.153  2002/06/12 18:01:27  set
* Fixed: [Linux] the Resume member ever used the generic GetCursorPos
instead of the driver selected version.

Revision 2.152  2002/06/12 17:41:07  set
* Added: Code to the TVDemo examples that shows how to use the TVCodePage
class. It remaps the system menu label and the calendar arrows.

Revision 2.151  2002/06/12 16:59:28  set
* Fixed: The THWMouse class called GetEvent if the mouse wasn't present.
This was the source of problems when switching consoles under Linux.

Revision 2.150  2002/06/12 16:46:38  set
* Modified: [X11] the driver now uses ISO-8859-1 fonts instead of PC437.

Revision 2.149  2002/06/12 15:40:03  set
* Added: [Linux] Code page detection to the driver. It needs console
IOCTLs. If we can't use them the driver tries to guess using the LANG
environment variable.
* Added: Symbolic names for all the supported code pages.

Revision 2.148  2002/06/12 12:34:12  set
* Added: A first step towards Linux console code page detection. Curently
the code only works for full console access and differentiates between
lat1, lat1u and koi8-r code pages.

Revision 2.147  2002/06/11 19:10:32  set
* Fixed: [XTerm] Window title set/get details.

Revision 2.146  2002/06/11 16:15:07  set
* Fixed: [UNIX] ln error when overwriting the libtvfdummy.a link.

Revision 2.145  2002/06/11 16:05:07  set
* Fixed: [Solaris+XTerm] The termios MIN and TIME values have a default
that isn't really good for interactive applications. Now I set to 0 both.
With this I succesfully run the editor remotely with mouse and shift/ctrl/
alt+key support.

Revision 2.144  2002/06/11 15:09:25  set
* Fixed: Missing \n after the tvfintl copy in generated makefile. Affected
UNIX targets.

Revision 2.143  2002/06/11 14:56:57  set
* Fixed: [XTerm] The suspend member needed a flush, without it calling a
shell didn't restore the shell screen.

Revision 2.142  2002/06/11 14:34:29  set
* Fixed: TEventQueue::resume() didn't indicate it was resumed if mouse
initialization failed.
* Fixed: [Linux] Suspend used the input before keyboard was resumed. Now
the file handle used for input is ever in non-block mode. This isn't stdin
so I think I can do it. From a report by Tapio.
* Fixed: [Linux] The driver assumed that Gpm_close set gpm_fd to -1, is not
true for GPM 1.17.8.
* Fixed: [Linux] The mouse driver didn't set Suspend correctly.

Revision 2.141  2002/06/11 12:15:07  set
* Added: [XTerm] Alt+numbers to the Xterm example script.
* Fixed: The screen.h doesn't have any relation with the original header
from Borland, put it clear.
* Fixed: [XTerm] the palette mechanism, now works and is faster.
* Modified: [XTerm] the new XTerm uses ugly colors, forced PC BIOS colors
because they are the colors used by Linux console, Eterm, X11 driver, DOS
and Win32 versions.
* Added: [XTerm] now the button shadows and color samples (reverse space)
are closer to the original shapes.

Revision 2.140  2002/06/10 20:59:42  set
* Added: TVCodePage class. That's the first version of the codepage
remapping routines.
* Added: More key bindings to the Xterm.res example. They help with some
xterm versions.
* Modified: [XTerm] the driver to use a separated file handle for input.
It solves interferences like in the Linux driver.
* Added: [XTerm] Now the driver starts with ISO-8859-1 mapping so the
frames and similar stuff aren't ugly anymore.
* Added: A broadcast message cmUpdateCodePage to indicate a code page
change.

Revision 2.139  2002/06/10 13:24:06  set
* Fixed: tvfintl must be used for the examples if no intl was found.
* Fixed: We no longer need to patch vpath_src in .maks for Win32.
* Modified: Now a copy of libtvfintl.a is put in the same directory where
the librhtv.* is created, it helps applications like setedit that can use
Turbo Vision even if not installed.
* Fixed: [Win32] cursor driver issues.
* Fixed: [WinNT] lack of stdlib include.
* Fixed: [MinGW] it doesn't define ssize_t.
* Modified: win32/readme.txt, I teste the library with MinGW 1.1+MSys 1.0.7
and SiePerl, it works and I explain how to use it.

Revision 2.138  2002/06/07 19:11:25  set
* Modified: [UNIX] the configuration to test if the X11 include directory
is really needed. It looks like gcc 3.1 gives a warning if this is manually
specified. Is a test because I don't have gcc 3.1 for Linux. Reported by
Andris.

Revision 2.137  2002/06/07 18:13:40  set
* Modified: [X11] Now after a draw the cursor becomes visible inmediatly.
This is slower but increases the cursor visibility. Ivan reported problems.

Revision 2.136  2002/06/07 15:46:21  set
* Added: A first attempt to create a MSVC compatible makefile. WintiX
<wintix@bk.ru> sent me the file and I added it to the configuration
mechanism. In this way the list of object files is extracted from the
RHIDE's .mak.

Revision 2.135  2002/06/07 15:37:15  set
* Fixed: [MSVC] Compatlayer getcwd request, from info by WintiX.

Revision 2.134  2002/06/07 14:34:17  set
* Fixed: xtmouse.h lack of new line at the end of file. Patch by Andris.
* Test: Looks like some glibc 2.2.5 includes libintl.h without explicit
request. It generates some conflicts. Here I include a possible workaround.
Reported by Andris.

Revision 2.133  2002/06/07 02:15:07  terrible
* Updated: Debian packaging with small changes.

Revision 2.132  2002/06/06 19:32:05  set
* Fixed: The gcc 3.1 standard C++ streams doesn't define a public methode
to open a stream from a C stream/file handle. It wasn't this way in 3.0 and
3.1 pre-releases (which were supposed to be ISO C++ compliant). To overcome
this problem I wrote a wrapper for std::filebuf. That's ultra compiler
version specific and I don't know how many time will be supported. This
idea was suggested by Andris. The modifications are small, but implied some
work to understand how stdc++ works. BTW: stdc++ itself needs a similar
trick for cout/cin associated with stdout/stdin ...

Revision 2.131  2002/06/05 20:24:51  set
* Fixed: The tutorial number 16 didn't initialize the data for one of the
input line examples producing random garbage. Reported by Mike.
.
Revision 2.130  2002/06/05 20:16:48  set
* Added: [QNX] New patch from Mike to enhance the keyboard handling.
* Fixed: TInputLine used an archaic ^Y hardcoded symbol instead of kbCtY.
Patch by Mike.

Revision 2.129  2002/06/05 15:28:38  set
* Fixed: [X11] Now when the WM sends a DELETE_WINDOW message (usually
because the user used the close button) the TV application gets a cmQuit
event.

Revision 2.128  2002/06/05 14:26:45  set
* Added: Thanks to JASC in the X11 code, I think he deserves it.

Revision 2.127  2002/06/05 14:17:50  set
* Fixed: [X11] the driver didn't map ^a-^z, reported by Ivan.

Revision 2.126  2002/06/05 14:16:40  set
* Updated: Distribution files list to include update and THANKS.

Revision 2.125  2002/06/04 19:39:41  set
* Modified: Now the configuration determines the directories where extra
libraries could be located and adds it to the list of directories.

Revision 2.124  2002/06/04 18:34:40  set
* Fixed: Another *.* pattern, reported by Tapio.

Revision 2.123  2002/06/04 18:31:10  set
* Fixed: [Linux] Now I use a separated file handle for the stdin. The
explanation is in the code and is complex. Fixes random fails on cursor
position restore at exit.

Revision 2.122  2002/06/04 18:28:58  set
* Fixed: When no window was in the desktop and a dialog was executed it
left the cursor in the last used position. Now TDesktop detects it and
if the cursor will remain visible is moved to the last line in the screen.

Revision 2.121  2002/06/04 16:01:59  set
* Fixed: demo file for QNX. When I moved includes to Uses_* forgot to
include the config header. Reported by Mike.

Revision 2.120  2002/06/04 15:45:22  set
* Updated: The list of files to convert when using the UNIX tarball.

Revision 2.119  2002/06/04 15:44:07  set
* Modified: Now specialCharacters is part of the TView class and not just
a variable. While we don't use namespaces I think we should try to avoid
defining things outside classes if not necesary.

Revision 2.118  2002/06/04 14:51:45  set
* Added: THANKS file with the list of contributors, also updated the www
site.

Revision 2.117  2002/06/04 13:21:54  set
* Modified: Added comments and removed dead code on the last changes.

Revision 2.116  2002/06/03 20:56:23  set
* Added: Now TDeskTop moves the cursor to the bottom of the screen when
an object lost the focus and we are in the "Braille friendly" mode. Until
now the changes are good according to Tapio.

Revision 2.115  2002/06/03 19:42:24  set
* Fixed: [Linux] The Resume member needed a fflush before calling a child
process (a shell for example).

Revision 2.114  2002/06/03 19:02:43  set
* Added: Uses_chdir request to compatlayer (needed for MSVC where the name
is _chdir).
* Fixed: Absent Uses_getcwd action for MSVC (direct.h _getcwd).

Revision 2.113  2002/06/03 16:34:03  set
* Updated/Added: Win32 makefiles.

Revision 2.112  2002/06/03 16:30:52  set
* Fixed: Some MSVC issues from feedback sent by WintiX <wintix@bk.ru>

Revision 2.111  2002/06/03 16:29:18  set
* Fixed: TMenuBar::getItemRect, the return value was commented by Anatoli,
but not all compilers (read MSVC) are cleaver enough to realize this code
is never used. I re-enabled the code but it could interfere with another
compiler. We'll see.

Revision 2.110  2002/06/03 16:26:04  set
* Fixed: The code that helps Win32 ports in the configuration script. It
touched files of the current target, was outdated and have case sensitive
file systems bugs.

Revision 2.109  2002/06/03 15:20:34  set
* Modified: [QNX] A new patch from Mike for the keyboard tables.
* Added/Fixed: Some small details in the demo code. Patches from Mike, but
applied in a different way.

Revision 2.108  2002/06/03 13:44:48  set
* Added: [Win32] The "WinNT" driver. Now this is available and I also
adapted things so the "Win32" driver is also available. It means that both:
the code from Anatoli and Vadim can be used for BC++, Cygwin and MinGW.
It looks like Anatoli's code is much faster and less complex. Currently
the WinNT driver have more priority for BC++ and less for Cygwin/MinGW.

Revision 2.107  2002/06/03 13:18:38  set
* Fixed: [DOS] Typo in cursor shape code (let it enabled all the time).
* Fixed: [DOS] Palette must be restored each time a mode is set.

Revision 2.106  2002/06/03 13:14:36  set
* Added: Palette support to the DOS driver.
* Modified: The low level setDisPaletteColors to return the number of
succesfuly set colors.

Revision 2.105  2002/06/03 12:55:41  set
* Modified: The X11 palette routines to include the redraw. Tested with
SETEdit.

Revision 2.104  2002/06/03 12:54:20  set
* Added: An option to never hide the cursor to TDisplay. The most important
effect of this variable is how it affects high level classes. When this
option is enabled some classes sets the cursor as visible and moves the
hardware cursor. But the low level stuff is needed to debug it.
* Added: Code to be "Braille friendly" to TMenuBox, TMenuBar and TButton.
* Added: Example code to the demo program, also added code to restore the
window title at exit.

Revision 2.103  2002/06/03 12:50:09  set
* Fixed: MinGW doesn't define ssize_t. Reported by Thiago.

Revision 2.102  2002/06/03 12:49:11  set
* Added: [Win32] According to Thiago newer versions of MinGW have their own
uname command that reports MINGW32_<windows flavor>. Added to the
conflib.pl.

Revision 2.101  2002/05/30 18:57:15  set
* Fixed: [FreeBSD] when calling ldconfig we must specify to merge the data
of the directory we installed the library. Suggested by miniEleph.

Revision 2.100  2002/05/30 18:29:26  set
* Fixed: Wilcard used by TVEdit *.* -> *
* Fixed: Shell call used in TVEdit, now is system neutral. Both pointed out
by Tapio.

Revision 2.99  2002/05/30 17:47:25  set
* Fixed: The column where the cursor is positioned to help Braille
Terminals. Lamentably we must add a mechanism to unhide the cursor because
in Linux if the cursor isn't visible the position isn't actually changed.
From information that Tapio Kelloniemi <tappi@thack.org> sent me.

Revision 2.98  2002/05/30 17:42:32  set
* Fixed: Lack of string header. Reported by Tapio Kelloniemi
<tappi@thack.org>

Revision 2.97  2002/05/30 17:26:56  set
* Added: X11 Palette code, completly untested. The Linux driver code seems
to work.

Revision 2.96  2002/05/29 20:29:32  set
* Added: [UNIX] XTerm and Eterm palette support, is untested!

Revision 2.95  2002/05/29 17:56:02  set
* Fixed: [UNIX] TFileEditor was trying to convert UNIX files into DOS
format ;-) and what is worst using a temporal file with random rights. Now
the TVEdit example works on Linux.

Revision 2.94  2002/05/29 16:08:14  set
* Modified: TMenuBox to move the cursor to the selected menuitem. That's
an experiment to see if Braille Terminals gets benefited. Tapio Kelloniemi
<tappi@thack.org> pointed out this.

Revision 2.93  2002/05/29 15:28:20  set
* Fixed: [FreeBSD] According to miniEleph ldconfig gets mad if we install
librhtv.so.<full version>, now for this target I install librhtv.so.<major>

Revision 2.92  2002/05/29 13:03:32  set
* Fixed: TVHC project didn't exclude system headers.
* Updated: [DOS] project and makefile.
* Fixed: tvdemo3.cc included help.h directly.

Revision 2.91  2002/05/28 19:28:32  set
* Fixed: [www] The link to Sigala's port and the supported platforms.

Revision 2.90  2002/05/28 18:32:49  set
* [QNX] Applied patches from Mike:
- Added more recognized keys.
- Fixed some bugs in key code translation.
- Fixed uninitialized suspend variable and esc key delay.

Revision 2.89  2002/05/28 18:20:42  set
* Added: THelpFile/THelpWindow/THelpViewer and friends to the library.
Originally from Sigala's port and was only in the demo.
* Added: Turbo Vision Help Compiler. Adapted by Mike. I did some changes
to the code.

Revision 2.88  2002/05/28 15:53:32  set
* Fixed: [DOS] The config.pl file used djgpp/makefile and the file is in
fact named djgpp/Makefile. This isn't a problem for DOS/Windows, but is
a problem when using UNIX to copy the file. Pointed out by Mike.

Revision 2.87  2002/05/28 15:46:34  set
* Updated: The TV site and included a copy in the CVS/distribution.

Revision 2.86  2002/05/28 12:48:30  set
* Added: The first approach for the Palette handling. The user can access
a couple of TScreen members (get/setPaletteColors) that works using a
couple of members defined by each driver (get/setDisPaletteColors) and some
buffers (ActualPalette, OriginalPalette and PC_BIOSPalette). Added the
capability bits needed to know what's implemented. I implemented it in the
Linux driver, lamentably Linux lack a mechanism to know the current colors.
I explain more in linuxdis.cc.

Revision 2.85  2002/05/27 17:46:18  set
* Added: QNX update from Mike:
I'm almost done the screen related stuff (only minor bugs remain), 25% done
keyboard stuff (only functional keys and cursor keys seems to be work) and
no mouse support at all.

Revision 2.84  2002/05/27 14:05:27  set
* Added: Mouse support to the XTerm driver and put in the list of drivers.
Also fixed a lot of details in this driver. This new XTerm driver restores
the screen, supports shift/ctrl/alt+special keys and interactive mouse.
* Added: An example on how to start an old xterm (from X 3.x) to get all
the keys.
* Added: An example theme fro Eterm 0.9.x to get all the key combinations.
It configures Eterm as xterm from X 4.x.

Revision 2.83  2002/05/27 12:26:30  set
* Fixed: [UNIX] The makemak.pl script created a link to a no longer
existant linux/gkeyli.cc file. Pointed out by Mike.

Revision 2.82  2002/05/24 20:13:29  set
* Added: The first test classes for the XTerm driver. They aren't tested
yet but I think they will work much better than the ncurses version.

Revision 2.81  2002/05/20 15:56:55  set
* Fixed: UNIX and X11 drivers didn't set uid and gid to the effective
values after initialization. This is used for Linux console driver, but
must be done for all.
* Modified: [X11] no default title is used, it was "Test".

Revision 2.80  2002/05/20 15:27:29  set
* Added: QNX files to RHIDE project and hence Makefile.

Revision 2.79  2002/05/20 15:23:57  set
* Added: QNX skeleton files from Mike. I changed the code a little bit to
generate the most important dependencies even when using Linux's RHIDE.

Revision 2.78  2002/05/20 15:08:43  set
* Modified: Now the Linux code is in a separated driver. The old code is
now the UNIX driver.
The new driver is only for Linux console and doesn't apply for Xterm. This
driver doesn't need ncurses and have the following new features:
 * If the app. is in a real console (ttyN) but doesn't have VCS access
 the text of the screen is saved/restored using the Linux ioctls for select
 and paste with the mouse.
 * The colors and attributes of the console are saved/restored.
 * get/setWindowTitle can affect what ps reports if the user helps the
 library providing pointers to argv and environ.

Revision 2.77  2002/05/17 18:54:31  set
* Added: More configuration patches for QNX from Mike. Complements the
special flags for dynamic libs patch and workarounds a library search
issue of QNX 6.2 beta 3.

Revision 2.76  2002/05/17 18:33:20  set
* Modified: RHIDE project to include QNX sources from Mike.

Revision 2.75  2002/05/16 21:21:12  set
* Modified: [Linux] Added Scroll-Lock to the patch list, it freezies the
application and some people thinks it hanged. To make it worst some idiots
put the S-L key very close to Home just to insert a stupid key to make
the machine sleep and hence is quite easy to press S-L instead of Home. So
now TV remaps S-L to Home. From a report by David A. Capello
<dacap@users.sourceforge.net>.

Revision 2.74  2002/05/16 21:04:53  set
* Fixed: [X11] The code failed to track key-up events when other
application had the focus becoming out of sync. Now I added code to sync
the states. Works for XFree86 and Solaris.

Revision 2.73  2002/05/16 18:54:15  set
* Added: A batch of patches from Mike for QNX.
 * Configuration for libstdc++
 * strings.h inclusion.
 * Class: member(value) -> Class { member=value; for some cases reported
   by the compiler as problematic.
 * Fixed: exclusion of X11 driver initialization if no X detected.
 * time.h for puzzle.h demo.

Revision 2.72  2002/05/16 18:19:30  set
* Added: QNX needs -shared to create a module for a dynamic library.
Pointed out by Mike.

Revision 2.71  2002/05/15 20:43:48  set
* Added: The first patches to configure under QNX, they just add QNX
detection but more will be added. Patches by Mike Gorchak <mike@malva.ua>

Revision 2.69  2002/05/15 19:06:14  set
* Fixed: Default CFLAGS for FreeBSD used -L/usr/local/include. Reported by
miniEleph (Andrew 'Onyx' Shevtsov).

Revision 2.68  2002/05/15 01:51:44  terrible
* Modified: Updates to Debian packaging.
* Fixed: reordered external library linking for dynamic library (I think
thats the correct order).
* Fixed: add -lX11 to the linking of the dynamic library if building with
X11 support (creates needed dependency between the rhtvision library and
X11 library, and allows compilation of rhtvision programs without needing
to specify -lX11).

Revision 2.67  2002/05/14 20:52:31  set
* Added: [X11] get/set window title.

Revision 2.66  2002/05/14 20:17:30  set
* Modified: Now x11 headers are in the include/tv/x11 directory. Reported
by miniEleph.

Revision 2.65  2002/05/13 19:30:22  set
* Modified: The intl/dummy/Makefile didn't define CC and GNU make used cc.

Revision 2.64  2002/05/13 15:26:49  set
* Fixed: X11 cursor, again.

Revision 2.63  2002/05/13 13:25:18  set
* Modified: [Win32] Reenabled code by Vadim that is supposed to compress
the mouse queue. Needs more investigation.

Revision 2.62  2002/05/13 13:14:30  set
* Fixed: Win32 makefile now needs vpath for the DOS files (now separated).
* Updated: The files distribution list.
* Fixed: [Win32] Many typos and missing references in the Win32 code so now
it compiles.
* Added: [Win32] the console state and cursor position/shape is restored.
* Fixed: [Win32] the screen content is now restored, Vadim specified a
wrong rectangle.
* Updated: [Win32] the readme.
* I tested all with Cygwin and seems to quite functional.

Revision 2.61  2002/05/13 13:03:35  set
* Modified: [UNIX] Now the FHS detection is more strict, the existance of
share/doc is not enough, share/man and shared/info must exist.
* Fixed: [UNIX] The FHS detection looks in $prefix and not in /usr.

Revision 2.60  2002/05/10 18:52:23  set
* Fixed: [UNIX] makemak.pl assumed perl is installed in /usr/bin/perl, it
doesn't have to be true. Now the makefile uses: "perl makemak.pl".

Revision 2.59  2002/05/10 18:46:33  set
* Fixed: [Solaris] getopt.c didn't include some needed headers.

Revision 2.58  2002/05/10 17:34:44  set
* Modified: [X11] Cursor initialization.
* Fixed: [X11 Solaris] XmbLookupString doesn't support NULL for status.

Revision 2.57  2002/05/10 15:21:13  set
* Modified: [X11 Solaris] It looks like Solaris 7 (at least the one I have
access) have a broken ITIMER_REAL.

Revision 2.56  2002/05/10 14:17:27  set
* Modified: [X11] to use sigaction, seems that signal behaves different in
Solaris.

Revision 2.55  2002/05/08 12:31:57  set
* Fixed: [UNIX] The .gpr include directory was hardcoded instead of using
TVSRC. From a report by miniEleph.

Revision 2.54  2002/05/07 19:06:26  set
* Modified: [X11] Now only the changed text is updated. In the test case
it produced a 290% increase in speed.

Revision 2.53  2002/05/07 16:54:08  set
* Added: [FreeBSD] getopt_long request in compatlayer. Reported by
miniEleph.

Revision 2.52  2002/05/06 15:04:15  set
* Added: X11R6 include directory to the configuration script. It looks like
this directory isn't automagically included in FreeBSD. Also added options
to configure it -x-include and -x-lib. Reported by miniEleph
<nyxo@dnuc.polyn.kiae.su>.

Revision 2.51  2002/05/06 13:38:59  set
* Added: The first step for the Win32 driver. All is supposed to be there
but I didn't even try to compile.

Revision 2.50  2002/05/06 13:32:17  set
* Modified: A lot of DOS code. Now you can get an usable demo application
for DOS. Screen, mouse and keyboard seems to be usable.

Revision 2.49  2002/05/03 16:56:22  set
* Fixed: Invisible cursor in the Linux driver.

Revision 2.48  2002/05/02 19:38:14  set
* Fixed: Window resize for X11. I didn't notify it to TProgram and the
window normalization was done before reallocating the screenBuffer.

Revision 2.47  2002/05/02 19:37:15  set
* Fixed: TDisplay::defaultGetWindowTitle(void) returned a static string,
not newly allocated.
* Fixed: TScreenX11 cursor was using one extra memory location. Detected
with efence.

Revision 2.46  2002/04/30 18:43:04  set
* Fixed: rhide.env files are now included by .mak files and the old syntax
to include another .env files isn't valid for make. Using "include" works
for both.
* Added: .mak files for the examples to the CVS.

Revision 2.45  2002/04/30 18:13:10  set
* Fixed: When running in a generic color terminal (using 8 colors) no color
remapping was applied. As a result the colors were messed.
* Added: Some minor support for "screen" terminal. Both from reports by
"Tatu Kilappa" <trilkk@hotmail.com>.

Revision 2.44  2002/04/29 20:17:49  set
* Fixed: dual.cc shouldn't be in the makefiles.
* Fixed: TEditor used getshiftstate.

Revision 2.43  2002/04/29 19:19:01  set
* Added: compat.mak to CVS so people without RHIDE can compile.
* Fixed: linuxso/makemak.pl needs to create a link to rhide.env for RHIDE
1.4.9 and newer.

Revision 2.42  2002/04/22 18:26:55  set
* Fixed: The file collection didn't support duplicates, but when it was
configured to be no case sensitive in an OS that is case sensitive some
names could look like duplicates and be omitted. Reported by David A.
Capello <dacap@users.sourceforge.net>.

Revision 2.41  2002/04/22 18:11:04  set
* Fixed: The configuration script configured the examples for Win32 in all
platforms.
* Added: Some copyrights to the new base classes.
* Added: Code to debug cursor problems.
* Fixed: Cursor under X11. The target still buggy but is the most finished.

Revision 2.40  2002/02/21 01:07:39  set
* Fixed: Some details to allow compiling under Linux. The code now
compiles.

Revision 2.39  2002/02/20 01:31:25  set
* Fixed: gcc 3.x problems with GetStrStream() macro. Reported and solution
by Andris.

Revision 2.38  2002/02/03 19:45:40  set
* Modified: Moved mouse.cc code to tevent.cc. It contains mouseInt() which
was reworked.
* Added: a new THWMouse member called drawCounter, used when the mouse is
drawn asynchronically by an interrupt. It can be accessed using TMouse
members: resetDrawCounter() and getDrawCounter(). Only needed by TView to
know if the mouse was updated while drawing to screen.
* Modified: Draw mouse to return 1 if the draw was necesary.
* Modified: TView to be more clean in the code that finds mouse position and
determines asynchronic draws.
* Modidied: Now the BIOS/direct mode for DOS driver is set using
SetKbdMapping. Two special values determines it: dosUseBIOS and dosUseDirect.
It allows for special actions (pointers redirection) and a portable mechanism
(you can use code that is valid for other drivers, not useful but valid).
* Added: Mouse and Keyboard headers for DOS are almost finished.

Revision 2.37  2002/02/02 15:20:08  set
* Modified: Now OS specific headers are in separated directories. Example:
tv/linuxscr.h is now tv/linux/screen.h.

Revision 2.36  2002/01/27 17:05:10  set
* Merged Ivan patches for Debian 1.1.4-1 package.

Revision 2.35  2002/01/03 02:14:41  set
* Fixed: Need to create win32/rhide.env for Cygwin/MinGW targets. Needed for
RHIDE 1.4.9.

Revision 2.34  2002/01/03 01:28:38  set
* Fixed: getline code for BC++ 5.5 target. [lack of ssize_t]

Revision 2.33  2002/01/02 00:15:43  set
* Fixed: The configuration forced tvfintl for Linux.
* Fixed: RHIDE 1.4.9 includes rhide.env in generated makefiles so the new
makefile used for Linux needs a link to it in linuxso directory.

Revision 2.32  2002/01/02 00:53:16  set
* Added: GNU getline replacement to compatlayer.

Revision 2.31  2002/01/01 01:28:23  set
* Added: Code to avoid collisions between the last changes in tv/intl.h and
djgpp's conio. Note that gettext instructs users on how to change libc to
avoid such a collision.

Revision 2.30  2001/12/31 21:59:23  set
* Modified: Now if gettext isn't detected the configuration uses the fake
internationalization dummy. It can be disabled with --no-intl. Why? it allows
people to install gettext *after* compiling TV, they just need to change the
linker options and all works. Pointed out by Laurynas.
* Added: --force-dummy option. It forces the use of tvfintl even if gettext
is installed. That's useful when most of your TV applications won't use intl
library. I use it for the editor that I compile using their own gettext under
DOS, in this way I avoid using iconv.
* Added: Documentation about it.
*** IMPORTANT *** I don't include libintl.h anymore and assume the
prototypes. This helps with the dummy and I doubt it will collide. If some
day it collides the configuration could indicate how to solve it.

Revision 2.29  2001/12/30 23:34:07  set
* Fixed: A couple of new[]/delete style missmatches while debugging setedit
with MSS 1.2.1.

Revision 2.28  2001/12/30 18:35:46  set
* Fixed: Compatlayer undefined FA_DIREC even in cases that didn't redefine
it.

Revision 2.27  2001/12/30 18:33:33  set
* Added: Support for MSS 1.2.1 and fixed missing delete [] in demo. Patches
by Laurynas.
* Added: Configuration options to use MSS and documentation in the readme.
* Fixed: Various missing delete [] in the classes.

Revision 2.26  2001/12/30 16:15:10  set
* Fixed: I wrongly changed the code used for the BC++ 5.5 target to yield
the processor to use the MinGW version. It made applications eat 100% of
the CPU.

Revision 2.25  2001/12/18 02:34:11  set
* Added: Fine grained protection against multiple inclutions in compatlayer
header.

Revision 2.24  2001/12/17 00:20:32  set
* Added: A new URL to the Borland's FAQ that says TV is Public Domain. This
is supported by all the TeamB people I contacted.

Revision 2.23  2001/12/11 00:59:59  set
* Added: TDisplayDOS is almost finished.
* Added: Started to work on DOS mouse driver.

Revision 2.22  2001/12/11 00:26:45  set
* Added: Some adjusts to compatlayer for Cygwin target. Needed to compile the
editor. Patch from Robert.

Revision 2.21  2001/12/06 01:17:15  set
* Fixed: Some errors in listvi example. It used constant strings for input
lines (read only on UNIX and of limited size a disaster). Also fixed the size
of the columns and input line to be nicer. Reported by Wojciech Warczakowski
(Wowar) <wowar@poczta.onet.pl>.

Revision 2.20  2001/11/29 23:08:41  set
* Modified: Solaris have nl_langinfo so we don't need to use the
replacement. I didn't check if this correction works.

Revision 2.19  2001/11/28 23:41:26  set
* Added: getopt when Solaris is detected.

Revision 2.18  2001/11/25 19:07:33  set
* Added: TEditorApp dependency (TApplication) to the tv.h.

Revision 2.17  2001/11/25 18:46:44  set
* Modified: compatlayer.h should be included just once as tv.h, but this
isn't the case for all the applications and enforces a policy that doesn't
have to be the same used by other projects. For this reason I removed the
protection and any collision will be solved for the particular case instead
of protecting the whole file. After a talk with Andris.

Revision 2.16  2001/11/25 16:12:00  set
* Added: Some support for linux-* terminals. Patch provided by "Dimitar
Jekov" <jimmy@ncp.infonet.bg>

Revision 2.15  2001/11/25 15:44:29  set
* Fixed: Desklogo examples to work with anything different than 80x25 and a
lack of a redraw in tv_logo. Reported by Cesar Rabak <csrabak@uol.com.br>.

Revision 2.14  2001/11/25 14:59:58  set
* Changed: classes/WinNT to winnt, it avoids some problems.
* Compiled all the stuff to verify that I incorporated all the needed code,
it changed makefiles and other stuff.
* Merged Ivan patched for debian package 1.1.3-3, but they are outdated for
this new 2.0.0 branch.
* Added include/tv/drivers.h, it defines prototypes for all the drivers
entry points.
* Added classes/tgkey.cc, it replaces gkey.cc but is the abstract driver
base containing common code for all the platforms.

Revision 2.13  2001/11/25 00:41:41  set
* Added: Definitions for middle mouse button and also buttons 4 and 5.

Revision 2.12  2001/11/25 00:39:38  set
* Changed: call to new API name in demo example (to set window title).

Revision 2.11  2001/11/25 00:34:04  set
* Modified: TView because now the functions to set the shape of the cursor
are compatible with BTV 2.0 and not BTV 1.03. Also a change in an extended
member. The names of extended members changed to keep API coherence and
avoid pointer collisions.

Revision 2.10  2001/11/25 00:31:40  set
* Modified: TProgram because I changed the names of some members in TScreen
(all extensions not found in BTV) and to avoid using the magic "dual"
variable. That's temporally part of TDisplay but just to compile, it must
be solved in another way not yet fully defined.

Revision 2.9  2001/11/25 00:29:02  set
* Modified: TEventQueue::resume to avoid calling magic Linux functions, now
TGKey have a suspend/resume for it.

Revision 2.8  2001/11/25 00:26:56  set
* Modified: TColorDialog to avoid using the old getBlinkState function, now
part of the TScreen class.

Revision 2.7  2001/11/25 00:12:12  set
* Added the headers for the Linux and X11 drivers.
* Changed the screen.h, event.h and gkey.h headers to declare the new class
structure.

Revision 2.6  2001/11/25 00:04:03  set
* Changed classes/tdisplay.cc, classes/tscreen.cc and classes/thwmouse.cc
by the new class structure. This is a complete rework of the classes but
maintaining backward compatibility.

Revision 2.5  2001/11/24 23:56:50  set
* Moved gkey.cc, classes/tdisplay.cc, classes/thwmouse.cc and
classes/tscreen.cc to the DOS driver because they have the DOS code. They
will be changed to follow the new class structure.

Revision 2.4  2001/11/24 23:43:28  set
* Added: A new driver for X11, it is quite functional and complete.

Revision 2.3  2001/11/24 23:40:10  set
* Merged: New code for the Linux terminals. It's currently only one driver
(the mouse is the only exception) and should be split in three, but is
adapted to the new class style.

Revision 2.2  2001/11/24 23:21:19  set
* Changed version to 2.0.0 because big changes are about to be merged.

Revision 2.1  2001/11/24 23:18:11  set
* Added: X library detection to the configuration.

Revision 2.0  2001/11/24 23:12:33  set
* New change.log file created.
