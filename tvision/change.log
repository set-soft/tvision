$Log$
Revision 2.96  2002/05/29 20:29:32  set
* Added: [UNIX] XTerm and Eterm palette support, is untested!

Revision 2.95  2002/05/29 17:56:02  set
* Fixed: [UNIX] TFileEditor was trying to convert UNIX files into DOS
format ;-) and what is worst using a temporal file with random rights. Now
the TVEdit example works on Linux.

Revision 2.94  2002/05/29 16:08:14  set
* Modified: TMenuBox to move the cursor to the selected menuitem. That's
an experiment to see if Braille Terminals gets benefited. Tapio Kelloniemi
<tappi@thack.org> pointed out this.

Revision 2.93  2002/05/29 15:28:20  set
* Fixed: [FreeBSD] According to miniEleph ldconfig gets mad if we install
librhtv.so.<full version>, now for this target I install librhtv.so.<major>

Revision 2.92  2002/05/29 13:03:32  set
* Fixed: TVHC project didn't exclude system headers.
* Updated: [DOS] project and makefile.
* Fixed: tvdemo3.cc included help.h directly.

Revision 2.91  2002/05/28 19:28:32  set
* Fixed: [www] The link to Sigala's port and the supported platforms.

Revision 2.90  2002/05/28 18:32:49  set
* [QNX] Applied patches from Mike:
- Added more recognized keys.
- Fixed some bugs in key code translation.
- Fixed uninitialized suspend variable and esc key delay.

Revision 2.89  2002/05/28 18:20:42  set
* Added: THelpFile/THelpWindow/THelpViewer and friends to the library.
Originally from Sigala's port and was only in the demo.
* Added: Turbo Vision Help Compiler. Adapted by Mike. I did some changes
to the code.

Revision 2.88  2002/05/28 15:53:32  set
* Fixed: [DOS] The config.pl file used djgpp/makefile and the file is in
fact named djgpp/Makefile. This isn't a problem for DOS/Windows, but is
a problem when using UNIX to copy the file. Pointed out by Mike.

Revision 2.87  2002/05/28 15:46:34  set
* Updated: The TV site and included a copy in the CVS/distribution.

Revision 2.86  2002/05/28 12:48:30  set
* Added: The first approach for the Palette handling. The user can access
a couple of TScreen members (get/setPaletteColors) that works using a
couple of members defined by each driver (get/setDisPaletteColors) and some
buffers (ActualPalette, OriginalPalette and PC_BIOSPalette). Added the
capability bits needed to know what's implemented. I implemented it in the
Linux driver, lamentably Linux lack a mechanism to know the current colors.
I explain more in linuxdis.cc.

Revision 2.85  2002/05/27 17:46:18  set
* Added: QNX update from Mike:
I'm almost done the screen related stuff (only minor bugs remain), 25% done
keyboard stuff (only functional keys and cursor keys seems to be work) and
no mouse support at all.

Revision 2.84  2002/05/27 14:05:27  set
* Added: Mouse support to the XTerm driver and put in the list of drivers.
Also fixed a lot of details in this driver. This new XTerm driver restores
the screen, supports shift/ctrl/alt+special keys and interactive mouse.
* Added: An example on how to start an old xterm (from X 3.x) to get all
the keys.
* Added: An example theme fro Eterm 0.9.x to get all the key combinations.
It configures Eterm as xterm from X 4.x.

Revision 2.83  2002/05/27 12:26:30  set
* Fixed: [UNIX] The makemak.pl script created a link to a no longer
existant linux/gkeyli.cc file. Pointed out by Mike.

Revision 2.82  2002/05/24 20:13:29  set
* Added: The first test classes for the XTerm driver. They aren't tested
yet but I think they will work much better than the ncurses version.

Revision 2.81  2002/05/20 15:56:55  set
* Fixed: UNIX and X11 drivers didn't set uid and gid to the effective
values after initialization. This is used for Linux console driver, but
must be done for all.
* Modified: [X11] no default title is used, it was "Test".

Revision 2.80  2002/05/20 15:27:29  set
* Added: QNX files to RHIDE project and hence Makefile.

Revision 2.79  2002/05/20 15:23:57  set
* Added: QNX skeleton files from Mike. I changed the code a little bit to
generate the most important dependencies even when using Linux's RHIDE.

Revision 2.78  2002/05/20 15:08:43  set
* Modified: Now the Linux code is in a separated driver. The old code is
now the UNIX driver.
The new driver is only for Linux console and doesn't apply for Xterm. This
driver doesn't need ncurses and have the following new features:
 * If the app. is in a real console (ttyN) but doesn't have VCS access
 the text of the screen is saved/restored using the Linux ioctls for select
 and paste with the mouse.
 * The colors and attributes of the console are saved/restored.
 * get/setWindowTitle can affect what ps reports if the user helps the
 library providing pointers to argv and environ.

Revision 2.77  2002/05/17 18:54:31  set
* Added: More configuration patches for QNX from Mike. Complements the
special flags for dynamic libs patch and workarounds a library search
issue of QNX 6.2 beta 3.

Revision 2.76  2002/05/17 18:33:20  set
* Modified: RHIDE project to include QNX sources from Mike.

Revision 2.75  2002/05/16 21:21:12  set
* Modified: [Linux] Added Scroll-Lock to the patch list, it freezies the
application and some people thinks it hanged. To make it worst some idiots
put the S-L key very close to Home just to insert a stupid key to make
the machine sleep and hence is quite easy to press S-L instead of Home. So
now TV remaps S-L to Home. From a report by David A. Capello
<dacap@users.sourceforge.net>.

Revision 2.74  2002/05/16 21:04:53  set
* Fixed: [X11] The code failed to track key-up events when other
application had the focus becoming out of sync. Now I added code to sync
the states. Works for XFree86 and Solaris.

Revision 2.73  2002/05/16 18:54:15  set
* Added: A batch of patches from Mike for QNX.
 * Configuration for libstdc++
 * strings.h inclusion.
 * Class: member(value) -> Class { member=value; for some cases reported
   by the compiler as problematic.
 * Fixed: exclusion of X11 driver initialization if no X detected.
 * time.h for puzzle.h demo.

Revision 2.72  2002/05/16 18:19:30  set
* Added: QNX needs -shared to create a module for a dynamic library.
Pointed out by Mike.

Revision 2.71  2002/05/15 20:43:48  set
* Added: The first patches to configure under QNX, they just add QNX
detection but more will be added. Patches by Mike Gorchak <mike@malva.ua>

Revision 2.69  2002/05/15 19:06:14  set
* Fixed: Default CFLAGS for FreeBSD used -L/usr/local/include. Reported by
miniEleph (Andrew 'Onyx' Shevtsov).

Revision 2.68  2002/05/15 01:51:44  terrible
* Modified: Updates to Debian packaging.
* Fixed: reordered external library linking for dynamic library (I think
thats the correct order).
* Fixed: add -lX11 to the linking of the dynamic library if building with
X11 support (creates needed dependency between the rhtvision library and
X11 library, and allows compilation of rhtvision programs without needing
to specify -lX11).

Revision 2.67  2002/05/14 20:52:31  set
* Added: [X11] get/set window title.

Revision 2.66  2002/05/14 20:17:30  set
* Modified: Now x11 headers are in the include/tv/x11 directory. Reported
by miniEleph.

Revision 2.65  2002/05/13 19:30:23  set
* Modified: The intl/dummy/Makefile didn't define CC and GNU make used cc.

Revision 2.64  2002/05/13 15:26:49  set
* Fixed: X11 cursor, again.

Revision 2.63  2002/05/13 13:25:18  set
* Modified: [Win32] Reenabled code by Vadim that is supposed to compress
the mouse queue. Needs more investigation.

Revision 2.62  2002/05/13 13:14:30  set
* Fixed: Win32 makefile now needs vpath for the DOS files (now separated).
* Updated: The files distribution list.
* Fixed: [Win32] Many typos and missing references in the Win32 code so now
it compiles.
* Added: [Win32] the console state and cursor position/shape is restored.
* Fixed: [Win32] the screen content is now restored, Vadim specified a
wrong rectangle.
* Updated: [Win32] the readme.
* I tested all with Cygwin and seems to quite functional.

Revision 2.61  2002/05/13 13:03:35  set
* Modified: [UNIX] Now the FHS detection is more strict, the existance of
share/doc is not enough, share/man and shared/info must exist.
* Fixed: [UNIX] The FHS detection looks in $prefix and not in /usr.

Revision 2.60  2002/05/10 18:52:23  set
* Fixed: [UNIX] makemak.pl assumed perl is installed in /usr/bin/perl, it
doesn't have to be true. Now the makefile uses: "perl makemak.pl".

Revision 2.59  2002/05/10 18:46:33  set
* Fixed: [Solaris] getopt.c didn't include some needed headers.

Revision 2.58  2002/05/10 17:34:44  set
* Modified: [X11] Cursor initialization.
* Fixed: [X11 Solaris] XmbLookupString doesn't support NULL for status.

Revision 2.57  2002/05/10 15:21:13  set
* Modified: [X11 Solaris] It looks like Solaris 7 (at least the one I have
access) have a broken ITIMER_REAL.

Revision 2.56  2002/05/10 14:17:27  set
* Modified: [X11] to use sigaction, seems that signal behaves different in
Solaris.

Revision 2.55  2002/05/08 12:31:57  set
* Fixed: [UNIX] The .gpr include directory was hardcoded instead of using
TVSRC. From a report by miniEleph.

Revision 2.54  2002/05/07 19:06:26  set
* Modified: [X11] Now only the changed text is updated. In the test case
it produced a 290% increase in speed.

Revision 2.53  2002/05/07 16:54:08  set
* Added: [FreeBSD] getopt_long request in compatlayer. Reported by
miniEleph.

Revision 2.52  2002/05/06 15:04:15  set
* Added: X11R6 include directory to the configuration script. It looks like
this directory isn't automagically included in FreeBSD. Also added options
to configure it -x-include and -x-lib. Reported by miniEleph
<nyxo@dnuc.polyn.kiae.su>.

Revision 2.51  2002/05/06 13:38:59  set
* Added: The first step for the Win32 driver. All is supposed to be there
but I didn't even try to compile.

Revision 2.50  2002/05/06 13:32:17  set
* Modified: A lot of DOS code. Now you can get an usable demo application
for DOS. Screen, mouse and keyboard seems to be usable.

Revision 2.49  2002/05/03 16:56:22  set
* Fixed: Invisible cursor in the Linux driver.

Revision 2.48  2002/05/02 19:38:14  set
* Fixed: Window resize for X11. I didn't notify it to TProgram and the
window normalization was done before reallocating the screenBuffer.

Revision 2.47  2002/05/02 19:37:15  set
* Fixed: TDisplay::defaultGetWindowTitle(void) returned a static string,
not newly allocated.
* Fixed: TScreenX11 cursor was using one extra memory location. Detected
with efence.

Revision 2.46  2002/04/30 18:43:04  set
* Fixed: rhide.env files are now included by .mak files and the old syntax
to include another .env files isn't valid for make. Using "include" works
for both.
* Added: .mak files for the examples to the CVS.

Revision 2.45  2002/04/30 18:13:10  set
* Fixed: When running in a generic color terminal (using 8 colors) no color
remapping was applied. As a result the colors were messed.
* Added: Some minor support for "screen" terminal. Both from reports by
"Tatu Kilappa" <trilkk@hotmail.com>.

Revision 2.44  2002/04/29 20:17:49  set
* Fixed: dual.cc shouldn't be in the makefiles.
* Fixed: TEditor used getshiftstate.

Revision 2.43  2002/04/29 19:19:01  set
* Added: compat.mak to CVS so people without RHIDE can compile.
* Fixed: linuxso/makemak.pl needs to create a link to rhide.env for RHIDE
1.4.9 and newer.

Revision 2.42  2002/04/22 18:26:55  set
* Fixed: The file collection didn't support duplicates, but when it was
configured to be no case sensitive in an OS that is case sensitive some
names could look like duplicates and be omitted. Reported by David A.
Capello <dacap@users.sourceforge.net>.

Revision 2.41  2002/04/22 18:11:04  set
* Fixed: The configuration script configured the examples for Win32 in all
platforms.
* Added: Some copyrights to the new base classes.
* Added: Code to debug cursor problems.
* Fixed: Cursor under X11. The target still buggy but is the most finished.

Revision 2.40  2002/02/21 01:07:39  set
* Fixed: Some details to allow compiling under Linux. The code now
compiles.

Revision 2.39  2002/02/20 01:31:25  set
* Fixed: gcc 3.x problems with GetStrStream() macro. Reported and solution
by Andris.

Revision 2.38  2002/02/03 19:45:40  set
* Modified: Moved mouse.cc code to tevent.cc. It contains mouseInt() which
was reworked.
* Added: a new THWMouse member called drawCounter, used when the mouse is
drawn asynchronically by an interrupt. It can be accessed using TMouse
members: resetDrawCounter() and getDrawCounter(). Only needed by TView to
know if the mouse was updated while drawing to screen.
* Modified: Draw mouse to return 1 if the draw was necesary.
* Modified: TView to be more clean in the code that finds mouse position and
determines asynchronic draws.
* Modidied: Now the BIOS/direct mode for DOS driver is set using
SetKbdMapping. Two special values determines it: dosUseBIOS and dosUseDirect.
It allows for special actions (pointers redirection) and a portable mechanism
(you can use code that is valid for other drivers, not useful but valid).
* Added: Mouse and Keyboard headers for DOS are almost finished.

Revision 2.37  2002/02/02 15:20:08  set
* Modified: Now OS specific headers are in separated directories. Example:
tv/linuxscr.h is now tv/linux/screen.h.

Revision 2.36  2002/01/27 17:05:10  set
* Merged Ivan patches for Debian 1.1.4-1 package.

Revision 2.35  2002/01/03 02:14:41  set
* Fixed: Need to create win32/rhide.env for Cygwin/MinGW targets. Needed for
RHIDE 1.4.9.

Revision 2.34  2002/01/03 01:28:38  set
* Fixed: getline code for BC++ 5.5 target. [lack of ssize_t]

Revision 2.33  2002/01/02 00:15:43  set
* Fixed: The configuration forced tvfintl for Linux.
* Fixed: RHIDE 1.4.9 includes rhide.env in generated makefiles so the new
makefile used for Linux needs a link to it in linuxso directory.

Revision 2.32  2002/01/02 00:53:16  set
* Added: GNU getline replacement to compatlayer.

Revision 2.31  2002/01/01 01:28:23  set
* Added: Code to avoid collisions between the last changes in tv/intl.h and
djgpp's conio. Note that gettext instructs users on how to change libc to
avoid such a collision.

Revision 2.30  2001/12/31 21:59:23  set
* Modified: Now if gettext isn't detected the configuration uses the fake
internationalization dummy. It can be disabled with --no-intl. Why? it allows
people to install gettext *after* compiling TV, they just need to change the
linker options and all works. Pointed out by Laurynas.
* Added: --force-dummy option. It forces the use of tvfintl even if gettext
is installed. That's useful when most of your TV applications won't use intl
library. I use it for the editor that I compile using their own gettext under
DOS, in this way I avoid using iconv.
* Added: Documentation about it.
*** IMPORTANT *** I don't include libintl.h anymore and assume the
prototypes. This helps with the dummy and I doubt it will collide. If some
day it collides the configuration could indicate how to solve it.

Revision 2.29  2001/12/30 23:34:07  set
* Fixed: A couple of new[]/delete style missmatches while debugging setedit
with MSS 1.2.1.

Revision 2.28  2001/12/30 18:35:46  set
* Fixed: Compatlayer undefined FA_DIREC even in cases that didn't redefine
it.

Revision 2.27  2001/12/30 18:33:33  set
* Added: Support for MSS 1.2.1 and fixed missing delete [] in demo. Patches
by Laurynas.
* Added: Configuration options to use MSS and documentation in the readme.
* Fixed: Various missing delete [] in the classes.

Revision 2.26  2001/12/30 16:15:10  set
* Fixed: I wrongly changed the code used for the BC++ 5.5 target to yield
the processor to use the MinGW version. It made applications eat 100% of
the CPU.

Revision 2.25  2001/12/18 02:34:11  set
* Added: Fine grained protection against multiple inclutions in compatlayer
header.

Revision 2.24  2001/12/17 00:20:32  set
* Added: A new URL to the Borland's FAQ that says TV is Public Domain. This
is supported by all the TeamB people I contacted.

Revision 2.23  2001/12/11 00:59:59  set
* Added: TDisplayDOS is almost finished.
* Added: Started to work on DOS mouse driver.

Revision 2.22  2001/12/11 00:26:45  set
* Added: Some adjusts to compatlayer for Cygwin target. Needed to compile the
editor. Patch from Robert.

Revision 2.21  2001/12/06 01:17:15  set
* Fixed: Some errors in listvi example. It used constant strings for input
lines (read only on UNIX and of limited size a disaster). Also fixed the size
of the columns and input line to be nicer. Reported by Wojciech Warczakowski
(Wowar) <wowar@poczta.onet.pl>.

Revision 2.20  2001/11/29 23:08:41  set
* Modified: Solaris have nl_langinfo so we don't need to use the
replacement. I didn't check if this correction works.

Revision 2.19  2001/11/28 23:41:26  set
* Added: getopt when Solaris is detected.

Revision 2.18  2001/11/25 19:07:33  set
* Added: TEditorApp dependency (TApplication) to the tv.h.

Revision 2.17  2001/11/25 18:46:44  set
* Modified: compatlayer.h should be included just once as tv.h, but this
isn't the case for all the applications and enforces a policy that doesn't
have to be the same used by other projects. For this reason I removed the
protection and any collision will be solved for the particular case instead
of protecting the whole file. After a talk with Andris.

Revision 2.16  2001/11/25 16:12:00  set
* Added: Some support for linux-* terminals. Patch provided by "Dimitar
Jekov" <jimmy@ncp.infonet.bg>

Revision 2.15  2001/11/25 15:44:29  set
* Fixed: Desklogo examples to work with anything different than 80x25 and a
lack of a redraw in tv_logo. Reported by Cesar Rabak <csrabak@uol.com.br>.

Revision 2.14  2001/11/25 14:59:58  set
* Changed: classes/WinNT to winnt, it avoids some problems.
* Compiled all the stuff to verify that I incorporated all the needed code,
it changed makefiles and other stuff.
* Merged Ivan patched for debian package 1.1.3-3, but they are outdated for
this new 2.0.0 branch.
* Added include/tv/drivers.h, it defines prototypes for all the drivers
entry points.
* Added classes/tgkey.cc, it replaces gkey.cc but is the abstract driver
base containing common code for all the platforms.

Revision 2.13  2001/11/25 00:41:41  set
* Added: Definitions for middle mouse button and also buttons 4 and 5.

Revision 2.12  2001/11/25 00:39:38  set
* Changed: call to new API name in demo example (to set window title).

Revision 2.11  2001/11/25 00:34:04  set
* Modified: TView because now the functions to set the shape of the cursor
are compatible with BTV 2.0 and not BTV 1.03. Also a change in an extended
member. The names of extended members changed to keep API coherence and
avoid pointer collisions.

Revision 2.10  2001/11/25 00:31:40  set
* Modified: TProgram because I changed the names of some members in TScreen
(all extensions not found in BTV) and to avoid using the magic "dual"
variable. That's temporally part of TDisplay but just to compile, it must
be solved in another way not yet fully defined.

Revision 2.9  2001/11/25 00:29:02  set
* Modified: TEventQueue::resume to avoid calling magic Linux functions, now
TGKey have a suspend/resume for it.

Revision 2.8  2001/11/25 00:26:56  set
* Modified: TColorDialog to avoid using the old getBlinkState function, now
part of the TScreen class.

Revision 2.7  2001/11/25 00:12:12  set
* Added the headers for the Linux and X11 drivers.
* Changed the screen.h, event.h and gkey.h headers to declare the new class
structure.

Revision 2.6  2001/11/25 00:04:03  set
* Changed classes/tdisplay.cc, classes/tscreen.cc and classes/thwmouse.cc
by the new class structure. This is a complete rework of the classes but
maintaining backward compatibility.

Revision 2.5  2001/11/24 23:56:50  set
* Moved gkey.cc, classes/tdisplay.cc, classes/thwmouse.cc and
classes/tscreen.cc to the DOS driver because they have the DOS code. They
will be changed to follow the new class structure.

Revision 2.4  2001/11/24 23:43:28  set
* Added: A new driver for X11, it is quite functional and complete.

Revision 2.3  2001/11/24 23:40:10  set
* Merged: New code for the Linux terminals. It's currently only one driver
(the mouse is the only exception) and should be split in three, but is
adapted to the new class style.

Revision 2.2  2001/11/24 23:21:19  set
* Changed version to 2.0.0 because big changes are about to be merged.

Revision 2.1  2001/11/24 23:18:11  set
* Added: X library detection to the configuration.

Revision 2.0  2001/11/24 23:12:33  set
* New change.log file created.
